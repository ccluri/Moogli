<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
               "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Moogli</title>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="title" content="Moogli"/>
<meta name="generator" content="Org-mode"/>
<meta name="generated" content="2012-11-20 22:44:57 CET"/>
<meta name="author" content="chaitanya"/>
<meta name="description" content=""/>
<meta name="keywords" content=""/>
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  html { font-family: Times, serif; font-size: 12pt; }
  .title  { text-align: center; }
  .todo   { color: red; }
  .done   { color: green; }
  .tag    { background-color: #add8e6; font-weight:normal }
  .target { }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  {margin-left:auto; margin-right:0px;  text-align:right;}
  .left   {margin-left:0px;  margin-right:auto; text-align:left;}
  .center {margin-left:auto; margin-right:auto; text-align:center;}
  p.verse { margin-left: 3% }
  pre {
	border: 1pt solid #AEBDCC;
	background-color: #F3F5F7;
	padding: 5pt;
	font-family: courier, monospace;
        font-size: 90%;
        overflow:auto;
  }
  table { border-collapse: collapse; }
  td, th { vertical-align: top;  }
  th.right  { text-align:center;  }
  th.left   { text-align:center;   }
  th.center { text-align:center; }
  td.right  { text-align:right;  }
  td.left   { text-align:left;   }
  td.center { text-align:center; }
  dt { font-weight: bold; }
  div.figure { padding: 0.5em; }
  div.figure p { text-align: center; }
  div.inlinetask {
    padding:10px;
    border:2px solid gray;
    margin:10px;
    background: #ffffcc;
  }
  textarea { overflow-x: auto; }
  .linenr { font-size:smaller }
  .code-highlighted {background-color:#ffff00;}
  .org-info-js_info-navigation { border-style:none; }
  #org-info-js_console-label { font-size:10px; font-weight:bold;
                               white-space:nowrap; }
  .org-info-js_search-highlight {background-color:#ffff00; color:#000000;
                                 font-weight:bold; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="./css/bootstrap.css" />
<script type="text/javascript">
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>

</head>
<body>

<div id="preamble">

</div>

<div id="content">
<h1 class="title">Moogli</h1>


<div style="text-align: center">

</div>



<div class="row">
<div class="span15">

<div class="span3 bs-docs-sidebar">
<ul class="nav nav-list bs-docs-sidenav affix">
<p>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">Introduction</a></li>
<li><a href="#sec-2">Installation</a></li>
<li><a href="#sec-3">Supported Formats</a></li>
<li><a href="#sec-4">Defaults</a></li>
<li><a href="#sec-5">Keyboard &amp; Mouse shortcuts</a></li>
<li><a href="#sec-6">Use Cases</a></li>
<li><a href="#sec-7">TO DO</a></li>
<li><a href="#sec-8">Additional Information</a></li>
<li><a href="#sec-9">Known Issues</a></li>
<li><a href="#sec-10">FAQ</a></li>
<li><a href="#sec-11">Acknowledgements</a></li>
<li><a href="#sec-12">Collaborate</a></li>
<li><a href="#sec-13">Contact</a></li>
</ul>
</div>
</div>

</ul>
</div>



<div class="span12">
</p>

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1">Introduction</h2>
<div class="outline-text-2" id="text-1">


<p>
  Moogli (a sister project of <a href="http://moose.ncbs.res.in">MOOSE</a>) is a simulator independent openGL based
  visualization tool for neural simulations. Moogli can visualize morphology
  of single/multiple neurons or network of neurons, and can also
  visualize activity in these cells.
</p>
<p>
  Moogli is like VLC player for neural simulations.
</p>

</div>

</div>

<div id="outline-container-2" class="outline-2">
<h2 id="sec-2">Installation</h2>
<div class="outline-text-2" id="text-2">



</div>

<div id="outline-container-2-1" class="outline-3">
<h3 id="sec-2-1">Additional Software</h3>
<div class="outline-text-3" id="text-2-1">

<ol>
<li>python2.6/2.7
</li>
<li>PyQt4
</li>
<li>hdf5
</li>
<li>matplotlib   
</li>
<li>mencoder   
</li>
<li><a href="https://gforge.inria.fr/frs/?group_id=773">libQGLViewer-2.3.15-py</a> &amp; install instructions <a href="http://www.libqglviewer.com//installUnix.html#linux">here</a>
</li>
<li><a href="https://gforge.inria.fr/frs/?group_id=773">PyQGLViewer0.10</a> (first install libQGLViewer-2.3.15-py) and untar contents

<p>
      cd / PyQGLViewer0.10 
      <br \>
      &gt;python setup.py build   # to compile
      <br \>
      &gt;python setup.py install # to install on your system
      <br \>
      &gt;python setup.py bdist   # to create a binary distribution
</p></li>
</ol>



</div>

</div>

<div id="outline-container-2-2" class="outline-3">
<h3 id="sec-2-2">Get Moogli</h3>
<div class="outline-text-3" id="text-2-2">


<p>
   Download and unzip Moogli from <a href="https://github.com/ccluri/Moogli">git repo</a>
</p>
</div>

</div>

<div id="outline-container-2-3" class="outline-3">
<h3 id="sec-2-3">Run Moogli</h3>
<div class="outline-text-3" id="text-2-3">


<p>
   In terminal, cd to location of unzipped Moogli folder (/Moogli)
</p>
<p>
   &gt;python moogli.py
</p>
<p>
   You will see an white screen with axes on the bottom left.
</p>
</div>
</div>

</div>

<div id="outline-container-3" class="outline-2">
<h2 id="sec-3">Supported Formats</h2>
<div class="outline-text-2" id="text-3">



<div style="text-align: center">
<p><img src="./static/images/supportedFormats.png" width=80% width=80% alt="./static/images/supportedFormats.png" />
</p>
</div>


</div>

<div id="outline-container-3-1" class="outline-3">
<h3 id="sec-3-1">Input Formats</h3>
<div class="outline-text-3" id="text-3-1">


<p>
  Currently .xml (MorphML/NeuroML), .csv for visualizaing morphology of cells
  The .p file format is in development
</p>
<p>
  The format currently employed for data visualization is <a href="#sec-8">hdf5</a>. The file
  structure  includes morphology of the cell(s) being visualized. Currently
  support Morphml (.xml) Neuroml(.xml) and .csv
</p>
<p>  
  Moogli now also supports .csv for data visualization. See /samples/timeSeries.csv for example  
</p>
<p>
  <a href="#sec-7">In future</a>: Employ a standard format for data visualization.
  Also plans to include electrophys file formats.
</p>
<p>
  Currently: Testing neo compatibility and auto placement of cells.
</p>
</div>

</div>

<div id="outline-container-3-2" class="outline-3">
<h3 id="sec-3-2">Save as formats</h3>
<div class="outline-text-3" id="text-3-2">


<p>
  Save screenshot (.png) of the current display.
</p>
<p>
  Save as movie (.avi) for data visualization.
  [Users will be able to 'direct' their movies soon]
</p>
</div>
</div>

</div>

<div id="outline-container-4" class="outline-2">
<h2 id="sec-4">Defaults</h2>
<div class="outline-text-2" id="text-4">


<p>
  Refer to /Moogli/defaults.py file (the file is self explanatory via comments)
</p>
<ol>
<li>Background color of the scene.
</li>
<li>To draw the cells using default settings.
</li>
<li>To visualize the cells using default settings.
</li>
<li>To use default binning properties.
</li>
<li>Speed of visualization updation.
</li>
<li>FPS/height/width when saving as .avi
</li>
</ol>


</div>

</div>

<div id="outline-container-5" class="outline-2">
<h2 id="sec-5">Keyboard &amp; Mouse shortcuts</h2>
<div class="outline-text-2" id="text-5">


<p>
  Keyboard - User can bring this up by hitting 'H' key
</p>

<div style="text-align: center">
<p><img src="./static/images/keyBoardShortcuts.png" width=60% alt="./static/images/keyBoardShortcuts.png" />
</p>
</div>

<p>
  Mouse - User can bring this up by hitting 'H' key
</p>

<div style="text-align: center">
<p><img src="./static/images/mouseShortcuts.png" width=60% alt="./static/images/mouseShortcuts.png" />
</p>
</div>

<p>
  Additionally:
</p>
<p>
  Control + O : Open File
  <br \>  
  Control + S : Save As
  <br \>  
  Control + Q : Quit
  <br \>  
  Spacebar    : Play/Pause Visualization
</p>

</div>

</div>

<div id="outline-container-6" class="outline-2">
<h2 id="sec-6">Use Cases</h2>
<div class="outline-text-2" id="text-6">



</div>

<div id="outline-container-6-1" class="outline-3">
<h3 id="sec-6-1">Inspect morphology of cell</h3>
<div class="outline-text-3" id="text-6-1">


<p>
   File&gt;Open&gt; (/Moogli/samples/mitralCell.xml)
</p>

<div style="text-align: center">
<p><img src="./static/images/mitralCell1.png" width=80% alt="./static/images/mitralCell1.png" />
</p>
</div>

<p>
   Above prompt is only seen when <a href="#sec-4">DEFAULT DRAW</a> is False
</p>
<p>
   Selecting to draw all compartments (Button labeled 'A') as cylinders and click 'OK'
</p>
<p>
   alternatively, if not sure
</p>
<p>
   Click 'Use Defaults'
</p>
<p>
   Result:
</p>

<div style="text-align: center">
<p><img src="./static/images/mitralCell2.png" width=80% alt="./static/images/mitralCell2.png" />
</p>
</div>

<p>
   Try displaying some of the compartments in a cell as cylinders and others as capsules.
</p>

</div>

</div>

<div id="outline-container-6-2" class="outline-3">
<h3 id="sec-6-2">Display multiple copies of same cell</h3>
<div class="outline-text-3" id="text-6-2">


<p>
   File&gt;Open&gt; (/Moogli/samples/cablesIncludedExtended.csv)
</p>
<p>
   Accomplished by giving an offset position in the style selection prompt
</p>
<p>
   Result:
</p>

<div style="text-align: center">
<p><img src="./static/images/stylesOffsetPosition.png" width=80% alt="./static/images/stylesOffsetPosition.png" />
</p>
</div>

</div>

</div>

<div id="outline-container-6-3" class="outline-3">
<h3 id="sec-6-3">Visualizing Parameters</h3>
<div class="outline-text-3" id="text-6-3">


<p>
   File&gt;Open&gt; (/Moogli/samples/mitral.h5)
</p>
<p>
   The hdf5 file has the data only for 3 compartments. Moogli can handle partial data. Here showing
   default visualization.
</p>
<p>
   Result:
</p>

<div style="text-align: center">
<p><img src="./static/images/mitral_h5.png" width=80% alt="./static/images/mitral_h5.png" />
</p>
</div>

<p>
   More later &hellip;
</p>

</div>
</div>

</div>

<div id="outline-container-7" class="outline-2">
<h2 id="sec-7">TO DO</h2>
<div class="outline-text-2" id="text-7">



</div>

<div id="outline-container-7-1" class="outline-3">
<h3 id="sec-7-1">Network Level</h3>
<div class="outline-text-3" id="text-7-1">


<p>
   There is also the case of visualizing large network of neurons(1000's) In
   which case, the morphology of individual cell is ignored, and each neuron
   is represented as spheres/disks which are placed according to a graphviz
   like algorithm depending on connectivity. (Also support for NetworkML)
</p>
<p>
   In this case, the data may be only spike timing data. But the tree
   structure of the previous case is still adhered and the connectivity
   between compartments is stored as text arrays inside hdf5 file itself.
</p>
</div>

</div>

<div id="outline-container-7-2" class="outline-3">
<h3 id="sec-7-2">Formats</h3>
<div class="outline-text-3" id="text-7-2">


<p>
   Employ a standard format for data, HDF5 format ( NeuroHDF? )
   Support additionally Electrophys file formats ( neo? )
   Support .p file formats
</p>
<p>
   Direction of movie output - cleaner ways to do it - a possible demo?
</p>
</div>

</div>

<div id="outline-container-7-3" class="outline-3">
<h3 id="sec-7-3">Examples</h3>
<div class="outline-text-3" id="text-7-3">


<p>
   More examples /use cases for documentation
</p>
</div>

</div>

<div id="outline-container-7-4" class="outline-3">
<h3 id="sec-7-4">Packaging</h3>
<div class="outline-text-3" id="text-7-4">


<p>
   Easy to install packaging. Specific to each OS.
</p>
</div>
</div>

</div>

<div id="outline-container-8" class="outline-2">
<h2 id="sec-8">Additional Information</h2>
<div class="outline-text-2" id="text-8">



</div>

<div id="outline-container-8-1" class="outline-3">
<h3 id="sec-8-1">New Color Maps</h3>
<div class="outline-text-3" id="text-8-1">


<p>
   If one needs to add other colormaps to the existing, generate a list of color values (rgb)
   scaled to 1 (ie 0 to 255 = 0 to 1) and pickle this list. Ensure no name conflics when naming
   the file. Now add this pickled file in the /Moogli/openGLHeaders/colormaps folder.
   In addition use the script /Moogli/icons/makeColorMap.py to generate an icon for the colormap.
</p>
</div>

</div>

<div id="outline-container-8-2" class="outline-3">
<h3 id="sec-8-2">HDF5</h3>
<div class="outline-text-3" id="text-8-2">



<div style="text-align: center">
<p><img src="./static/images/hdfFileFormat.png" width=80% alt="./static/images/hdfFileFormat.png" />
</p>
</div>

<p>
   For single/multiple neurons, the data itself is stored in arrays,
   following a strict tree structure. For example,
</p>
<p>
   filename.h5&gt;cellName&gt;compartmenName&gt;propertyName
</p>
<p> 
   corresponds to the arrayof values of that property (can be membrane potential / Ca concentration
   etc) over time. This is because, it gives an easy intuitive handle to the
   data.
</p>
</div>
</div>

</div>

<div id="outline-container-9" class="outline-2">
<h2 id="sec-9">Known Issues</h2>
<div class="outline-text-2" id="text-9">


<ol>
<li>Drawing of cylinders/capsules at some times, would show up as discontinous elements.[NOW FIXED]
     <br \>  
     Issue: Drawing of cylinders in OpenGL has an issue Ref: /Moogli/openGLHeaders/objects.py
     <br \>    
     Current fix: Draw as Ball&amp;Sticks instead [THIS IS FIXED NOW]
</li>
</ol>



</div>

</div>

<div id="outline-container-10" class="outline-2">
<h2 id="sec-10">FAQ</h2>
<div class="outline-text-2" id="text-10">


<p>
  Q. Would Moogli support <b>some</b> specific file format?
  <br \>  
  A. The idea is to have as many supported formats as possible. Eventually that is.
</p>
<p>
  Q. I was able to see the cell initially, I zoomed out/in, now I do not see the cell!
  <br \>    
  A. In the /Moogli folder look for ".MoogliState.xml" file and delete it. This arises because
  of no limitation on zooming.
</p>
<p>
  More later &hellip;
</p>

<p>
  <a href="./page2.html">License</a>
</p>
</div>

</div>

<div id="outline-container-11" class="outline-2">
<h2 id="sec-11">Acknowledgements</h2>
<div class="outline-text-2" id="text-11">


<p>
  Upinder S. Bhalla, Subhasis Ray, Niraj Dudani, Aditya Gilra of NCBS for feedback and encouragment.
  <br \>  
  Developers of libQGLViewer and its python bindings by Frederic Boudon.
  <br \>  
  Harsha and punch for the website
</p>
</div>

</div>

<div id="outline-container-12" class="outline-2">
<h2 id="sec-12">Collaborate</h2>
<div class="outline-text-2" id="text-12">


<p>  
  We welcome you to collaborate on this project. Please send us your details, and how you can contribute. 
</p>
</div>

</div>

<div id="outline-container-13" class="outline-2">
<h2 id="sec-13">Contact</h2>
<div class="outline-text-2" id="text-13">


<p>
  Upinder S. Bhalla : bhalla[at]ncbs[dot]res[dot]in
  <br \>  
  C Hanuma Chaitanya : chaitanyah[at]ncbs[dot]res[dot]in
</div>
</div>
</div>
</p></div>
</div>
</div>

<div id="postamble">
<p class="date">Date: 2012-11-20 22:44:57 CET</p>
<p class="creator">Org version 7.8.02 with Emacs version 23</p>
<a href="http://validator.w3.org/check?uri=referer">Validate XHTML 1.0</a>

</div>
</body>
</html>
